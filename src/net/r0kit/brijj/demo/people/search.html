<!DOCTYPE html>
<html>
<head>
  <title>Ajax Search Demo</title>
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
  <script type='text/javascript' src='../tabs/tabs.js'> </script>
  <script type='text/javascript' src='../brijj/engine.js'> </script>
  <script type='text/javascript' src='../brijj/interface/People.js'> </script>
  <script type="text/javascript" src='search.js'> </script>
  <link rel="stylesheet" type="text/css" href="../tabs/tabs.css" />
  <link rel="stylesheet" type="text/css" href="../generic.css" />
  <style type="text/css">
  .highlight { color:#F33; }
  </style>
</head>
<body onload="init();">
<div id="page-title">[
  <a href="http://r0kit.net/brijj/">brijj Website</a> |
  <a href="..">Web Application Index</a>
]</div>

<h1>Ajax Search Demo</h1>

<p>This demo allows you to filter the data in a table.</p>

<ul id="tabList">
  <li><a data-tab="demoDiv">Demo</a></li>
  <li><a data-tab="explainDiv">How it works</a></li>
</ul>

  <div id="demoDiv">

    <p>Search: <input id="filter" onkeyup="filterChanged();"/></p>
    <table border="1" class="rowed grey">
      <thead>
        <tr>
          <th>Name</th>
          <th>Age</th>
          <th>Address</th>
        </tr>
      </thead>
      <tbody id="peoplebody">
      </tbody>
    </table>

  </div>

  <div id="explainDiv">
    <h2>Search Demo</h2>
    <p>On each change to the filter field we either call the server function
    <code>People.getMatchingFromLargeCrowd()</code> to find matches, or, if
    we have already found a set of matches, we filter that set if this makes
    sense.</p>

    <p>The server code simply searches the data using a RegEx.</p>

<pre>
public List&lt;Person&gt; getMatchingFromLargeCrowd(String filter)
{
    List&lt;Person&gt; reply = new ArrayList&lt;Person&gt;();
    Pattern regex = Pattern.compile(filter, Pattern.CASE_INSENSITIVE);
    for (Person person : largeCrowd.values())
    {
        if (regex.matcher(person.getName()).find())
        {
            reply.add(person);
        }
    }
    return reply;
}
</pre>

    <p>We use <code>person.name.replace</code> to highlight the matches.</p>

  </div>

</body>
</html>
